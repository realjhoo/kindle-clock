<!DOCTYPE html>

<head>
    <link rel="stylesheet" href="style.css">
    <title>Kindle Clock</title>
</head>
<html>

<body>

    <p id="xdate">Date</p><br>
    <p id="time">Time</p><br><br>
    <h1>
        <span id="greeting">Greetings,</span>
        <span>Jerry</span>
    </h1>
    <h2 id="moonphase"> - </h2>
    <h2>I created this</h2>

    <!-- JavaScript Starts Here -->
    <script>
        function showDate() {
            var days = [
                "Sunday",
                "Monday",
                "Tuesday",
                "Wednesday",
                "Thursday",
                "Friday",
                "Saturday"
            ];

            var months = [
                "January",
                "February",
                "March",
                "April",
                "May",
                "June",
                "July",
                "August",
                "September",
                "October",
                "November",
                "December"
            ];

            var today = new Date(),
                day = today.getDay(),
                dato = today.getDate(),
                month = today.getMonth(),
                year = today.getFullYear();

            var fullDate = days[day] + ", " + dato + " " + months[month] + " " + year;

            document.getElementById("xdate").innerHTML = fullDate;
        }

        function showTime() {
            var today = new Date(),
                hour = today.getHours(),
                min = today.getMinutes();

            if (hour > 12) {
                hour = hour - 12;
            } else if (hour == 0) {
                hour = 12;
            }

            min = (parseInt(min, 10) < 10 ? "0" : "") + min;
            var fullTime = hour + ":" + min;

            document.getElementById("time").innerHTML = fullTime;
        }

        function setGreet() {
            var today = new Date(),
                hour = today.getHours();
            greeting = document.getElementById("greeting");

            if (hour < 12) {
                greeting.textContent = "Good morning, ";
            } else if (hour < 18) {
                greeting.textContent = "Good afternoon, ";
            } else {
                greeting.textContent = "Good evening, ";
            }
        }

        function showPhase() {
            var phase = [
                "New Moon",
                "Waxing Crescent Moon",
                "Quarter Moon",
                "Waxing Gibbous Moon",
                "Full Moon",
                "Waning Gibbous Moon",
                "Last Quarter Moon",
                "Waning Crescent Moon"
            ];
            var c = e = jd = b = 0;
            var today = new Date(),
                dato = today.getDate(),
                month = today.getMonth(),
                year = today.getFullYear();

            if (month < 3) {
                year--; // apparently the year begins in April
                month += 12;
            }

            month++;

            c = 365.25 * year; //no. of days since year 0
            e = 30.6 * month; //no. of days this year
            jd = c + e + dato - 694039.09; // current julian day - julian day for 1900.01.01 (a known full moon)
            jd /= 29.5305882; // divided by the lunar cycle, giving lunuation rounded to nearest whole day
            b = parseInt(jd); // discard fraction
            jd -= b; // subtract the integer from the julian day, leaving the fractional part 
            b = Math.round(jd * 8); // divide into pieces of eight

            if (b >= 8) {
                b = 0; // 0 and 8 are the same, so... 
            }

            document.getElementById("moonphase").innerHTML = phase[b];

        }

        function main() {
            showDate();
            showTime();
            setGreet();
            showPhase();
            setTimeout(main, 5000);
        }

        main();
    </script>

</body>

</html>
